(function(d){d.extend({isArray:function(f){return Object.prototype.toString.call(f)==="[object Array]";},isObject:function(f){return Object.prototype.toString.call(f)==="[object Object]";
}});var b=function(f){this.$ele=d(f);this.param=this.$ele.data("lzscroll-param");this.status=this.$ele.data("lzscroll-status");this.containerX=this.$ele.data("lzscroll-containerX");
this.containerY=this.$ele.data("lzscroll-containerY");this.barX=this.$ele.data("lzscroll-barX");this.barY=this.$ele.data("lzscroll-barY");};b.prototype.setEvent=function(){var f=this,g=this.param;
if(d.isArray(g.event)){d.each(g.event,function(h,i){f[i]&&f[i]();});}else{f[g.event]&&f[g.event]();}};b.prototype.wheel=function(){var g=this.$ele,f=this.status,h=this.param;
g.on("mousewheel.lzscroll DOMMouseScroll.lzscroll",function(o){var n=h.axis==="x"?f.controlW:f.controlH,i=h.axis==="x"?g.scrollLeft():g.scrollTop(),l=h.axis==="x"?f.contentW:f.contentH,k=h.axis==="x"?f.boxW:f.boxH,j=i,m=h.speed;
if(f.wheelflag&&n){var p=(o.originalEvent.wheelDelta&&(o.originalEvent.wheelDelta>0?1:-1))||(o.originalEvent.detail&&(o.originalEvent.detail>0?-1:1));if(p>0){i-=m;
}else{if(p<0){i+=m;}}if(h.axis==="x"){g.scrollLeft(i);}else{g.scrollTop(i);}if((j!==0||i!==0)&&(j!==l-k||i!==l-k)){return false;}}});};b.prototype.display=function(){var k=this.$ele,h=this.status,l=this.param,f=this.containerY,g=this.containerX,j=0,i=null;
k.off(".scrolldisplay");if(l.mode==="hover"){k.on("mouseover.scrolldisplay",function(m){!!f&&f.stop().fadeIn(200);!!g&&g.stop().fadeIn(200);}).on("mouseout.scrolldisplay",function(m){(!!f&&!h.mouseY)&&f.stop().fadeOut(200);
(!!g&&!h.mouseX)&&g.stop().fadeOut(200);});}else{if(l.mode==="active"){k.on("scroll.scrolldisplay",function(m){!!f&&f.show();!!g&&g.show();if(i){clearTimeout(i);
i=null;}i=setTimeout(function(){!!f&&f.fadeOut(200);!!g&&g.fadeOut(200);},1000);});}}};b.prototype.drag=function(){var j=this.$ele,h=this.status,m=this.param,k=this.barX,i=this.barY,g=this.containerX,f=this.containerY,l=d(document);
interY=0,outerY=0,interX=0,outerX=0;if(k){k.off("mousedown.lzscroll").on("mousedown.lzscroll",function(n){n.preventDefault();interX=n.offsetX;h.wheelflag=false;
h.mouseX=true;});}if(i){i.off("mousedown.lzscroll").on("mousedown.lzscroll",function(n){n.preventDefault();interY=n.offsetY;h.wheelflag=false;h.mouseY=true;
});}l.on("mouseup",function(n){n.preventDefault();if(!h.mouseH&&(h.mouseY||h.mouseX)&&m.display==="hover"){!!g&&g.hide();!!f&&f.hide();}h.mouseY=false;
h.mouseX=false;h.wheelflag=true;});j.off("mouseup.lzscroll").on("mouseup.lzscroll",function(n){h.mouseY=false;h.mouseX=false;h.wheelflag=true;});l.on("mousemove",function(r){if(h.mouseY){var s=j.offset().top,o=r.clientY;
h.moveH=o-interY-s;if(h.moveH<0){h.moveH=0;}else{if(h.moveH+h.controlH>h.boxH-h.space){h.moveH=h.boxH-h.controlH-h.space;}}n=~~(h.moveH*(h.contentH-h.boxH)/(h.boxH-h.space-h.controlH)+0.5);
j.scrollTop(n);f.css("top",n);i.css("top",h.moveH);if(g){g.css("bottom",-n);}}if(h.mouseX){var q=j.offset().left,p=r.clientX;h.moveW=p-interX-q;if(h.moveW<0){h.moveW=0;
}else{if(h.moveW+h.controlW>h.boxW-h.space){h.moveW=h.boxW-h.controlW-h.space;}}var n=~~(h.moveW*(h.contentW-h.boxW)/(h.boxW-h.space-h.controlW)+0.5);j.scrollLeft(n);
g.css("left",n);k.css("left",h.moveW);if(f){f.css("right",-n);}}});};b.prototype.listenChange=function(){var m=this.$ele,h=this.status,g=this.containerX,f=this.containerY;
if(MutationObserver){var j=new MutationObserver(function(){var n=m.width(),p=m.height(),k=m.prop("scrollWidth"),o=m.prop("scrollHeight");if(n!==h.boxW||p!==h.boxH||k!==h.contentW||o!==h.contentH){!!g&&g.css("width",h.boxW-h.space);
!!f&&f.css("height",h.boxH-h.space);m.get(0).scrollexcute.updateBox();m.barUpdate("Style",h.axis);m.barUpdate("Pos",h.axis);}j.disconnect();j.observe(m.get(0),l);
});var l={attributes:true,childList:true,subtree:true};j.observe(m.get(0),l);}else{if(i){clearInterval(i);}var i=setInterval(function(){var n=m.width(),p=m.height(),k=m.prop("scrollWidth"),o=m.prop("scrollHeight");
if(n!==h.boxW||p!==h.boxH||k!==h.contentW||o!==h.contentH){!!g&&g.css("width",h.boxW-h.space);!!f&&f.css("height",h.boxH-h.space);m.get(0).scrollexcute.updateBox();
m.barUpdate("Style",h.axis);m.barUpdate("Pos",h.axis);}},100);}};var c=function(f){this.$ele=d(f);this.param=this.$ele.data("lzscroll-param");this.status=this.$ele.data("lzscroll-status");
};c.prototype.updateBox=function(){var i=this.$ele,h=this.status,g=this.$ele.data("lzscroll-containerX"),f=this.$ele.data("lzscroll-containerY");if(g){g.css({bottom:0,left:0});
}if(f){f.css({top:0,right:0});}h.boxH=i.height();h.boxW=i.width();h.contentW=i.prop("scrollWidth");h.contentH=i.prop("scrollHeight");};c.prototype.updatePosY=function(){var k=this.$ele,i=k.data("lzscroll-containerX"),g=k.data("lzscroll-containerY"),j=k.data("lzscroll-barY"),h=this.status,f=k.scrollTop();
moveH=~~(f*(h.boxH-h.space-h.controlH)/(h.contentH-h.boxH)+0.5);h.moveH=moveH;if(g){g.css("top",f);j.css("top",moveH);}if(i){i.css("bottom",-f);}};c.prototype.updatePosX=function(){var j=this.$ele,i=j.data("lzscroll-containerX"),g=j.data("lzscroll-containerY"),k=j.data("lzscroll-barX"),h=this.status;
var f=j.scrollLeft();moveW=~~(f*(h.boxW-h.space-h.controlW)/(h.contentW-h.boxW)+0.5);h.moveW=moveW;if(g){g.css("right",-f);}if(i){i.css("left",f);k.css("left",moveW);
}};c.prototype.updateStyleY=function(){var k=this.$ele,i=k.data("lzscroll-containerY"),n=k.data("lzscroll-barY"),j=this.status,h=this.param,l=j.boxH,g=j.contentH,f=j.space,m=g<l?0:l/g*(l-f)>6?~~(l/g*(l-f)+0.5):6;
h.barChange===true?(j.controlH=m):(j.controlH=n.height());if(m>=l-f){i.css("display","none");}else{h.display!=="active"&&i.css("display","block");h.barChange&&n.css("height",m);
}};c.prototype.updateStyleX=function(){var n=this.$ele,k=n.data("lzscroll-containerX"),g=n.data("lzscroll-barX"),l=this.status,j=this.param,f=l.boxW,m=l.contentW,h=l.space,i=m<f?0:f/m*(f-h)>6?~~(f/m*(f-h)+0.5):6;
j.barChange===true?(l.controlW=i):(l.controlW=barY.width());if(i>=f-h){k.css("display","none");}else{j.display!=="active"&&k.css("display","block");j.barChange&&g.css("width",i);
}};var e=function(i,g,f,j,h){this.$ele=d(i);this.$ele.data("lzscroll-param",this.initParam(g,f,j,h));this.$ele.data("lzscroll-status",{wheelflag:true,axis:[],mouseX:false,mouseY:false,mouseH:false,contentH:0,contentW:0,boxH:0,boxW:0,controlH:0,contorlW:0,moveH:0,moveW:0,space:0});
};e.prototype.initParam=function(g,f,j,i){var h={axis:"y",theme:"default",speed:120,barChange:true,mode:"always",containerWidth:8,barWidth:6,listenChange:true,_onScroll:null,event:["wheel"]};
if(d.isObject(g)){h=d.extend({},h,g);}else{h.axis=g;h.speed=f;h.mode=j;h.theme=i;}!isNaN(g)&&(h.speed=g);if(this.$ele.data("lzscorll-param")){h=d.extend({},this.$ele.data("lzscroll-param"));
}h.axis=(h.axis=="x"||h.axis=="y"||h.axis=="xy"||h.axis=="yx")?h.axis:"y";h.mode=(h.mode=="active"||h.mode=="hover"||h.mode=="always")?h.mode:"active";
isNaN(h.speed)&&(h.speed=20);isNaN(h.containerWidth)&&(h.containerWidth=8);isNaN(h.BarWidth)&&(h.BarWidth=6);h.listenChange=h.listenChange===false?false:true;
h.barChange=h.barChange===false?false:true;!h.theme&&(h.theme="default");return h;};e.prototype.layout=function(){var k=this.$ele,m=k.data("lzscroll-param"),i=k.data("lzscroll-status");
i.axis=m.axis.split("");i.boxH=k.height();i.boxW=k.width();i.contentH=k.prop("scrollHeight");i.contentW=k.prop("scrollWidth");k.css("position")==="static"&&k.css("position","relative");
k.css("overflow")!=="hidden"&&k.css("overflow","hidden");(m.axis==="yx"||m.axis==="xy")&&(i.space=m.containerWidth);var h="lzscroll-"+m.theme,f=d("<div class='"+h+"-containerY'></div>").css({height:i.boxH-i.space,width:m.containerWidth,top:0,right:0,position:"absolute",marginRight:1}),g=d("<div class='"+h+"-containerX'></div>").css({width:i.boxW-i.space,height:m.containerWidth,left:0,bottom:0,position:"absolute",marginBottom:1}),j=d("<div class='"+h+"-barY'></div>").css({width:m.barWidth,left:(m.containerWidth-m.barWidth)/2,top:0,position:"absolute"}),l=d("<div class='"+h+"-barX'></div>").css({height:m.barWidth,top:(m.containerWidth-m.barWidth)/2,left:0,position:"absolute"});
if(m.axis==="x"){g.append(l).appendTo(k);k.data("lzscroll-containerX",g);k.data("lzscroll-barX",l);}else{if(m.axis==="y"){f.append(j).appendTo(k);k.data("lzscroll-containerY",f);
k.data("lzscroll-barY",j);}else{g.append(l).appendTo(k);f.append(j).appendTo(k);k.data("lzscroll-containerX",g);k.data("lzscroll-barX",l);k.data("lzscroll-containerY",f);
k.data("lzscroll-barY",j);}}k.barUpdate("Style",i.axis);};e.prototype.initEvent=function(){var j=this.$ele,k=j.data("lzscroll-param"),h=j.data("lzscroll-status"),f=j.data("lzscroll-containerY"),g=j.data("lzscroll-containerX"),i=new b(j);
if(k.mode!=="always"){k.event.push("display");!!g&&g.hide();!!f&&f.hide();}if(k.mode!=="active"){k.event.push("drag");}d(window).resize(function(l){h.boxW=j.width();
h.boxH=j.height();j.barUpdate("Style",h.axis);});j.off(".lzscorll");j.on("mouseover.lzscroll",function(l){h.mouseH=true;}).on("mouseout.lzscroll",function(l){h.mouseH=false;
}).on("scroll.lzscroll",function(l){if(h.wheelflag){j.barUpdate("Pos",h.axis);}if(k._onScroll){k._onScroll.call(this,k,h);}});k.listenChange&&(k.event.push("listenChange"));
i.setEvent();};var a=function(f){this.$ele=d(f);};a.prototype.destroy=function(){var f=this.$ele;d.each(f,function(h,i){var g=d(i);containerX=g.data("lzscroll-containerX"),containerY=g.data("lzscroll-containerY"),!!containerX&&containerX.remove();
!!containerY&&containerY.remove();g.off(".lzscroll").off(".scrolldisplay");g.removeData("lzscroll-param").removeData("lzscroll-status");});return false;
};a.prototype.init=function(g,f,j,i){var h=this.$ele;d.each(h,function(l,m){var k=d(m);k.scrollTop(0);k.scrollLeft(0);containerX=k.data("lzscroll-containerX"),containerY=k.data("lzscroll-containerY"),!!containerX&&containerX.remove();
!!containerY&&containerY.remove();});h.lzscroll(g,f,j,i);};a.prototype.scrollTop=function(f){var g=this.$ele;if(f===undefined){return g.eq(0).scrollTop();
}else{setTimeout(function(){g.scrollTop(f);},20);return this;}};a.prototype.scrollLeft=function(f){var g=this.$ele;if(f===undefined){return g.eq(0).scrollLeft();
}else{setTimeout(function(){g.scrollLeft(f);},20);return this;}};a.prototype.setContainerWidth=function(f){var g=this.$ele;d.each(g,function(j,l){var i=d(l),k=d(l).data("lzscroll-param"),h=d(l).data("lzscroll-status");
k.containerWidth=f;(k.axis==="yx"||k.axis==="xy")&&(h.space=k.containerWidth);!!i.data("lzscroll-containerY")&&i.data("lzscroll-containerY").css({width:f,height:h.boxH-h.space});
!!i.data("lzscroll-containerX")&&i.data("lzscroll-containerX").css({height:f,width:h.boxW-h.space});!!i.data("lzscroll-barY")&&i.data("lzscroll-barY").css({left:(k.containerWidth-k.barWidth)/2});
!!i.data("lzscroll-barX")&&i.data("lzscroll-barX").css({bottom:(k.containerWidth-k.barWidth)/2});i.barUpdate("Style",h.axis);i.barUpdate("Pos",h.axis);
});return this;};a.prototype.setBarWidth=function(f){var g=this.$ele;d.each(g,function(i,k){var h=d(k),j=d(k).data("lzscroll-param");j.barWidth=f;!!h.data("lzscroll-barY")&&h.data("lzscroll-barY").css({width:f,left:(j.containerWidth-j.barWidth)/2});
!!h.data("lzscroll-barX")&&h.data("lzscroll-barX").css({height:f,bottom:(j.containerWidth-j.barWidth)/2});});return this;};a.prototype.setMode=function(g){var f=this.$ele;
d.each(f,function(k,m){var j=d(m),i=j.data("lzscroll-containerX"),h=j.data("lzscroll-containerY");if(g==="active"||g==="hover"){!!i&&i.hide();!!h&&h.hide();
var l=new b(m);j.data("lzscroll-param").mode=g;l.display();}else{!!i&&i.show();!!h&&h.show();j.data("lzscroll-param").mode="always";j.off(".scrolldisplay");
}});};a.prototype.setTheme=function(g){var f=this.$ele;d.each(f,function(n,i){var p=d(i),l=p.data("lzscroll-containerX"),k=p.data("lzscroll-containerY"),h=p.data("lzscroll-barX"),q=p.data("lzscroll-barY"),j=p.data("lzscroll-param"),m="lzscroll-"+j.theme,o="lzscroll-"+g;
d(i).data("lzscroll-param").theme=g;!!l&&l.removeClass(m+"-containerX").addClass(o+"-containerX");!!k&&k.removeClass(m+"-containerY").addClass(o+"-containerY");
!!h&&h.removeClass(m+"-barX").addClass(o+"-barX");!!q&&q.removeClass(m+"-barY").addClass(o+"-barY");});return this;};a.prototype.setSpeed=function(f){var g=this.$ele;
d.each(g,function(h,i){d(i).data("lzscroll-param").speed=f;});return this;};a.prototype.on=function(h,f){var g=this.$ele;if(h==="scroll"){d.each(g,function(i,j){if(typeof f==="function"){d(j).data("lzscroll-param")._onScroll=f;
}});}};d.fn.barUpdate=function(g,f){var j=d(this).get(0);for(var h=0;h<f.length;h++){j.scrollexcute["update"+g+f[h].toUpperCase()]();}};d.fn.scrollTool=function(){var f=d(this);
return new a(f);};d.fn.lzscroll=function(g,f,j,i){var h=d(this);d.each(h,function(l,m){var k=new e(m,g,f,j,i);m.scrollexcute=new c(m);k.layout();k.initEvent();
});return h.scrollTool();};})(jQuery);