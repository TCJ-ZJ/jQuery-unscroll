(function(e){e.extend({isObject:function(h){return Object.prototype.toString.call(h)==="[object Object]";}});var f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(h){window.setTimeout(h,1000/60);
},c=window.cancelAnimationFrame||clearTimeout;var b=function(h){this.$ele=e(h);this.param=this.$ele.data("lzscroll-param");this.status=this.$ele.data("lzscroll-status");
this.containerX=this.$ele.data("lzscroll-containerX");this.containerY=this.$ele.data("lzscroll-containerY");this.barX=this.$ele.data("lzscroll-barX");this.barY=this.$ele.data("lzscroll-barY");
};b.prototype={setEvent:function(){var h=this;e.each(this.param.event,function(i,j){h[j]&&h[j]();});},wheel:function(){var j=this.$ele,i=j.get(0).scrollMethods,k=this.param,h=this.status;
j.on("mousewheel.lzscroll DOMMouseScroll.lzscroll",function(q){i._refresh();var p=k.axis==="x"?h.controlW:h.controlH,o=k.axis==="x"?h.contentW:h.contentH,n=k.axis==="x"?h.boxW:h.boxH,m=k.axis==="x"?j.scrollLeft():j.scrollTop();
if(h.canWheel&&p){var r=(q.originalEvent.wheelDelta&&(q.originalEvent.wheelDelta>0?1:-1))||(q.originalEvent.detail&&(q.originalEvent.detail>0?-1:1));i._setAnimateParam(k.animation?~~(k.speed/100*6):1,k.distance*(-r),k.axis);
i._animateScroll(j.get(0),k.axis);var l=k.axis==="x"?j.scrollLeft():j.scrollTop();if((m!==0||l!==0)&&(m!==o-n||l!==o-n)){return false;}}});},display:function(){var l=this.$ele,j=this.status,m=this.param,h=this.containerY,i=this.containerX,k=null;
l.off(".scrolldisplay");if(m.mode==="hover"){l.on("mouseenter.scrolldisplay",function(n){(!!h&&j.controlH&&!j.mouseY&&!j.mouseX)&&h.stop().hide().fadeIn(200);
(!!i&&j.controlW&&!j.mouseY&&!j.mouseX)&&i.stop().hide().fadeIn(200);}).on("mouseleave.scrolldisplay",function(n){(!!h&&!j.mouseY&&!j.mouseX)&&h.stop().fadeOut(200);
(!!i&&!j.mouseX&&!j.mouseY)&&i.stop().fadeOut(200);});}else{if(m.mode==="active"){l.on("scroll.scrolldisplay",function(n){(!!h&&j.controlH)&&h.show();(!!i&&j.controlW)&&i.show();
if(k){clearTimeout(k);k=null;}k=setTimeout(function(){!!h&&h.fadeOut(200);!!i&&i.fadeOut(200);},1000);});}}},drag:function(){var n=this.$ele,r=n.get(0).scrollMethods,l=this.status,j=this.param,m=this.containerX,k=this.containerY,p=e(document),o=0,h=0,q=0,i=0;
if(this.barX){this.barX.off("mousedown.lzscroll").on("mousedown.lzscroll",function(s){r._refresh();q=s.offsetX;l.canWheel=false;l.mouseX=true;return false;
}).off("click.lzscroll").on("click.lzscroll",function(s){return false;});}if(this.barY){this.barY.off("mousedown.lzscroll").on("mousedown.lzscroll",function(s){r._refresh();
o=s.offsetY;l.canWheel=false;l.mouseY=true;return false;}).off("click.lzscroll").on("click.lzscroll",function(s){return false;});}p.on("mouseup",function(s){s.preventDefault();
if(!l.mouseH&&(l.mouseY||l.mouseX)&&j.mode==="hover"){!!m&&m.hide();!!k&&k.hide();}l.mouseY=false;l.mouseX=false;l.canWheel=true;});n.off("mouseup.lzscroll").on("mouseup.lzscroll",function(s){l.mouseY=false;
l.mouseX=false;l.canWheel=true;});n.off("click.lzscroll").on("click.lzscroll",function(s){if(j.stopBubble){return false;}});p.on("mousemove",function(w){if(l.mouseY){var x=n.offset().top,t=w.clientY;
l.moveH=t-o-x;if(l.moveH<0){l.moveH=0;}else{if(l.moveH+l.controlH>l.boxH-l.space){l.moveH=l.boxH-l.controlH-l.space;}}s=~~(l.moveH*(l.contentH-l.boxH)/(l.boxH-l.space-l.controlH)+0.5);
r._doScrollY(s);}if(l.mouseX){var v=n.offset().left,u=w.clientX;l.moveW=u-q-v;if(l.moveW<0){l.moveW=0;}else{if(l.moveW+l.controlW>l.boxW-l.space){l.moveW=l.boxW-l.controlW-l.space;
}}var s=~~(l.moveW*(l.contentW-l.boxW)/(l.boxW-l.space-l.controlW)+0.5);r._doScrollX(s);}});},listenChange:function(){var j=this.$ele,i=j.get(0).scrollMethods,h=this.status;
if(!h.timer){h.timer=setInterval(function(){var k=j.data("lzscroll-stamp");k&&i._refresh();!k&&clearInterval(h.timer);},100);}}};var d=function(h){this.$ele=e(h);
this.param=this.$ele.data("lzscroll-param");this.status=this.$ele.data("lzscroll-status");this.containerX=this.$ele.data("lzscroll-containerX");this.containerY=this.$ele.data("lzscroll-containerY");
this.barX=this.$ele.data("lzscroll-barX");this.barY=this.$ele.data("lzscroll-barY");};d.prototype={_setAnimateParam:function(k,i,j){var h=this.status;h.times=k>1?k:1;
h.dis=~~(i/h.times);h.dir=j==="x"?"x":"y";},_fixScrollVal:function(h){var i=this.status;h=(h<0)?0:h;h=(h>(i.contentH-i.boxH))?i.contentH-i.boxH:h;return h;
},_animateScroll:function(){var h=this.status;h.times--;h.dir==="x"?this._doScrollX(h.scrollW+h.dis):this._doScrollY(h.scrollH+h.dis);c(h.requestid);if(h.times>0){h.requestid=f(this._animateScroll.bind(this));
}},_updateBox:function(){var p=this.$ele,k=this.status,l=this.containerX,j=this.containerY,o=false;!!l&&l.css({bottom:0,left:0});!!j&&j.css({top:0,right:0});
var q=p.innerWidth(),n=p.innerHeight(),r=p.prop("scrollWidth"),m=p.prop("scrollHeight"),i=p.scrollLeft(),s=p.scrollTop();(k.boxH!=n)&&(k.boxH=n,o=true);
(k.boxW!=q)&&(k.boxW=q,o=true);(k.contentW!=r)&&(k.contentW=r,o=true);(k.contentH!=m)&&(k.contentH=m,o=true);(!!j&&k.moveH>n-this.barY.height()-k.space)&&(o=true);
(!!l&&k.moveX>q-this.barX.width()-k.space)&&(o=true);!!l&&l.css({left:i,bottom:-s});!!j&&j.css({top:s,right:-i});return o;},_doScrollY:function(i){var k=this.$ele,l=this.param,j=this.status;
i=this._fixScrollVal(i);var h=~~(i*(j.boxH-j.space-j.controlH)/(j.contentH-j.boxH)+0.5);j.moveH=h;if(this.containerY){this.containerY.css("top",i);this.barY.css("top",h);
}if(this.containerX){this.containerX.css("bottom",-i);}j.scrollH=i;l._onUpdate&&l._onUpdate();k.scrollTop(i);},_doScrollX:function(h){var j=this.$ele,l=this.param,i=this.status;
h=this._fixScrollVal(h);var k=~~(h*(i.boxW-i.space-i.controlW)/(i.contentW-i.boxW)+0.5);i.moveW=k;if(this.containerX){this.containerX.css("left",h);this.barX.css("left",k);
}if(this.containerY){this.containerY.css("right",-h);}i.scrollW=h;l._onUpdate&&l._onUpdate();j.scrollLeft(h);},_updateStyleY:function(){var m=this.$ele,k=this.status,o=this.param,h=this.containerY,j=k.boxH,l=k.contentH,n=k.space,i=l<=j?0:j/l*(j-n)>6?~~(j/l*(j-n)+0.5):6;
o.barChange===true?(k.controlH=i):(k.controlH=this.barY.height());h.css("height",j-n);if(!i){h.css("display","none");}else{(o.mode=="always"||(o.mode=="hover"&&k.mouseH))&&h.css("display","block");
o.barChange&&this.barY.css("height",i);}},_updateStyleX:function(){var k=this.$ele,j=this.status,o=this.param,i=this.containerX,n=j.boxW,h=j.contentW,l=j.space,m=h<=n?0:n/h*(n-l)>6?~~(n/h*(n-l)+0.5):6;
o.barChange===true?(j.controlW=m):(j.controlW=this.barX.width());i.css("width",n-l);if(!m){i.css("display","none");}else{(o.mode=="always"||(o.mode=="hover"&&j.mouseH))&&i.css("display","block");
o.barChange&&this.barX.css("width",m);}},_refresh:function(){var h=this.$ele,i=this._updateBox();(!!this.containerX&&i)&&(this._doScrollX(h.scrollLeft()),this._updateStyleX());
(!!this.containerY&&i)&&(this._doScrollY(h.scrollTop()),this._updateStyleY());}};var g=function(j,i,h,k){this.$ele=e(j);this.$ele.data("lzscroll-param",this._initParam(i,h,k));
this.$ele.data("lzscroll-stamp",1);this.$ele.data("lzscroll-status",{canWheel:true,axis:[],mouseX:false,mouseY:false,mouseH:false,contentH:0,contentW:0,boxH:0,boxW:0,controlH:0,controlW:0,moveH:0,moveW:0,scrollH:0,scrollW:0,space:0,timer:null,times:0,dis:0,requestid:0,dir:"y"});
};g.prototype={defaults:{axis:"y",theme:"default",distance:120,speed:200,animation:true,barChange:true,mode:"always",containerWidth:8,barWidth:6,listenChange:true,stopBubble:false,_onScroll:null,_onUpdate:null,event:["wheel","drag"]},_initParam:function(i,h,l){var k=this.defaults,j=null;
if(e.isObject(i)){k=e.extend({},k,i);}else{k.axis=i;k.distance=h;k.mode=l;}!isNaN(i)&&(k.speed=i);if((j=this.$ele.data("lzscroll-param"))){k=e.extend({},k,j);
}k.axis=(k.axis=="x"||k.axis=="y"||k.axis=="xy"||k.axis=="yx")?k.axis:"y";k.mode=(k.mode=="active"||k.mode=="hover"||k.mode=="always")?k.mode:"always";
isNaN(k.distance)&&(k.distance=120);isNaN(k.speed)&&(k.speed=200);isNaN(k.containerWidth)&&(k.containerWidth=8);isNaN(k.BarWidth)&&(k.BarWidth=6);k.listenChange=k.listenChange===false?false:true;
k.animation=k.animation===false?false:true;k.barChange=k.barChange===false?false:true;!k.theme&&(k.theme="default");return k;},_layout:function(){var m=this.$ele,o=m.data("lzscroll-param"),k=m.data("lzscroll-status");
m.css("position")==="static"&&m.css("position","relative");m.css("overflow")!=="hidden"&&m.css("overflow","hidden");k.axis=o.axis.split("");(k.axis.length===2)&&(k.space=o.containerWidth);
var j="lzscroll-"+o.theme,h=e("<div class='"+j+"-containerY'></div>").css({width:o.containerWidth,top:0,right:0,position:"absolute"}),i=e("<div class='"+j+"-containerX'></div>").css({height:o.containerWidth,left:0,bottom:0,position:"absolute"}),l=e("<div class='"+j+"-barY'></div>").css({width:o.barWidth,left:(o.containerWidth-o.barWidth)/2,top:0,position:"absolute"}),n=e("<div class='"+j+"-barX'></div>").css({height:o.barWidth,top:(o.containerWidth-o.barWidth)/2,left:0,position:"absolute"});
if(e.inArray("x",k.axis)>=0){i.append(n).appendTo(m);m.data("lzscroll-containerX",i);m.data("lzscroll-barX",n);}if(e.inArray("y",k.axis)>=0){h.append(l).appendTo(m);
m.data("lzscroll-containerY",h);m.data("lzscroll-barY",l);}},_initEvent:function(){var m=this.$ele,k=m.get(0).scrollMethods,n=m.data("lzscroll-param"),j=m.data("lzscroll-status"),h=m.data("lzscroll-containerY"),i=m.data("lzscroll-containerX"),l=new b(m);
if(n.mode!=="always"){n.event.push("display");!!h&&h.css("display","none");!!i&&i.css("display","none");}e(window).resize(function(){if(!!m.data("lzscroll-stamp")){k._refresh();
}});m.off(".lzscroll").on("mouseenter.lzscroll",function(){j.mouseH=true;}).on("mouseleave.lzscroll",function(){j.mouseH=false;}).on("scroll.lzscroll",function(){n._onScroll&&n._onScroll();
});n.listenChange&&(n.event.push("listenChange"));l.setEvent();k._refresh();},_init:function(){var h=this.$ele.get(0);this._layout();h.scrollMethods=new d(h);
this._initEvent();}};var a=function(h){this.$ele=e(h);};a.prototype={destory:function(){e.each(this.$ele,function(l,m){var k=e(m);k.scrollTop(0);k.scrollLeft(0);
var j=k.data("lzscroll-containerX"),h=k.data("lzscroll-containerY"),i=k.data("lzscroll-status");i.timer&&clearInterval(i.timer);!!j&&j.remove();!!h&&h.remove();
k.off(".lzscroll").off(".scrolldisplay");k.removeData("lzscroll-param").removeData("lzscroll-status").removeData("lzscroll-stamp");m.scrollMethods=null;
});return false;},init:function(i,h,j){this.destroy();this.$ele.lzscroll(i,h,j);},refresh:function(){e.each(this.$ele,function(h,i){i.scrollMethods._refresh();
});return this;},scrollLeft:function(j,l){var k=this.$ele,i=k.get(0).scrollMethods,h=k.eq(0).data("lzscroll-status"),m=k.eq(0).data("lzscroll-param");l=l||m.speed;
if(j===undefined){return h.scrollW;}else{j=i._fixScrollVal(j);i._setAnimateParam(m.animation?~~(l/100*6):1,j-h.scrollW,"x");i._animateScroll(j);}return this;
},scrollTop:function(j,l){var k=this.$ele,i=k.get(0).scrollMethods,h=k.eq(0).data("lzscroll-status"),m=k.eq(0).data("lzscroll-param"),l=l||m.speed;if(j===undefined){return h.scrollH;
}else{j=i._fixScrollVal(j);i._setAnimateParam(m.animation?~~(l/100*6):1,j-h.scrollH,"y");i._animateScroll(j);}return this;},on:function(j,h){var i=this.$ele;
h=e.proxy(h,this);if(j==="scroll"){e.each(i,function(k,l){if(typeof h==="function"){e(l).data("lzscroll-param")._onScroll=h;}});}else{if(j==="update"){e.each(i,function(k,l){if(typeof h==="function"){e(l).data("lzscroll-param")._onUpdate=h;
}});}}}};e.fn.scrollTool=function(){return new a(this);};e.fn.lzscroll=function(i,h,j){e.each(this,function(k,l){if(!e(l).data("lzscroll-stamp")){new g(l,i,h,j)._init();
}});return this.scrollTool();};})(jQuery);